<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DWEC02. Objetos en JavaScript</title>
    <script src="js/aplicacion.js"></script>
  </head>
  <body onload="inicializar()">
    <script type="text/JavaScript">

            /** 
             * @param Date fecha es la fecha en tipo Date
             * @return int el año
             */
            function getEdad(fecha){
          
              // Obtener la edad en milisegundos
              // Date.now() obtiene el momento actual en milisegundos
              // edadEnMilisegundos es un objeto Date con el poder trabajar con fechas.
              let edadEnMilisegundos = new Date( Date.now() - fecha );

              // Devolvemos los años entre la edadEnMilisegundos y 1970.
              // El 1/1/1970 se toma como en inicio de la cuenta del tiempo (Timestamp)
              return Math.abs(edadEnMilisegundos.getUTCFullYear() - 1970);
            }
            
            // Dias de la semana
            const semana = ["jueves","viernes","sábado", "domingo", "lunes", "martes", "miércoles"];

            // Variable que se utiliza como un comodín para parsear los datos
            // recogidos del prompt
            let data;

            // Variable para html que se mostrará
            let html;

            // Para la fecha de tipo Dae
            let fecha;

            // Variables para los datos solicitados.
            let nombre_apellidos;
            let dia;
            let mes;
            let anno;

            document.write("<h1>TAREA DWEC03</h1>");

            // Solicitud de datos
            nombre_apellidos = window.prompt("Escriba su nombre y apellidos");
            dia = parseInt(window.prompt("Día de nacimiento"));
            mes = parseInt(window.prompt("Mes de nacimiento (número)"));
            anno = parseInt(window.prompt("Año de nacimiento"));
            fecha = new Date(anno, mes, dia);        

            html = `Buenos días ${nombre_apellidos}.
            <br>
            Tu nombre tiene ${nombre_apellidos.length} caracteres, incluidos espacios.
            <br>
            La primera letra A de tu nombre está en la posición ${nombre_apellidos.indexOf('a') +1}.
            <br>
            La última letra A de tu nombre está en la posición:  ${nombre_apellidos.lastIndexOf('a') +1}.
            <br>
            Tu nombre menos las 3 primeras letras es:  ${nombre_apellidos.substring(3)}.
            <br>
            Tu nombre todo en mayúsculas es:   ${nombre_apellidos.toUpperCase()}.
            <br>
            Tu edad es: ${isNaN(getEdad(fecha))? ' -- ' : getEdad(fecha) } años.
            <br>
            Naciste un feliz ${typeof semana[fecha.getDay()] === 'undefined'? ' -- ' : semana[fecha.getDay()]} del año ${isNaN(anno)? ' ---- ' : anno}.
            <br>
            El coseno de 180 es: ${Math.cos(180)}.
            <br>
            El número mayor de 6(34,7,23,75,35,19) es: ${Math.max(34,7,23,75,35,19)}
            <br>
            Ejemplo de número al azar: ${parseInt(Math.random() * 1000)}
      `;

            document.write(html);

    </script>

    <div style="margin-top: 20px">
      <button id="iniciar-app">Iniciar app</button>
      <button id="cerrar-app">Cerrar app</button>
    </div>
  </body>
</html>
